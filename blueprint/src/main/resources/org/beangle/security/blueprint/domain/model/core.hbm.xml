<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
  "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
  "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="org.beangle.security.blueprint.domain.model" default-access="org.beangle.hibernate.PropertyAccessor">

  <typedef name="seq" class="org.beangle.hibernate.SeqType"/>
  
  <class name="UserCategoryBean" abstract="true" entity-name="org.beangle.security.blueprint.domain.UserCategory">
    <id name="id" type="integer">
      <generator class="org.beangle.data.jpa.hibernate.TableSeqGenerator" />
    </id>
    <property name="name" />
  </class>

  <class name="UserBean" abstract="true" entity-name="org.beangle.security.blueprint.domain.User">
    <id name="id" type="long">
      <generator class="org.beangle.data.jpa.hibernate.TableSeqGenerator" />
    </id>
    <property name="code" />
    <property name="name" />
    <property name="updatedAt" />
    <property name="beginOn" />
    <property name="endOn" />
    <property name="enabled" />
    <property name="email" />
    <property name="credential" />
    <property name="locked" />
    <many-to-one name="category"/>
    <bag name="members" inverse="true" cascade="all-delete-orphan" collection-type="seq">
      <key column="user_id" not-null="true"/>
      <one-to-many class="org.beangle.security.blueprint.domain.Member"/>
    </bag>
  </class>
  
  <class name="MemberBean" abstract="true" entity-name="org.beangle.security.blueprint.domain.Member">
    <id name="id" type="long">
      <generator class="org.beangle.data.jpa.hibernate.TableSeqGenerator" />
    </id>
    <many-to-one name="user" not-null="true"/>
    <many-to-one name="role" not-null="true"/>
    <property name="member" not-null="true"/>
    <property name="granter" not-null="true"/>
    <property name="manager" not-null="true"/>
  </class>

  <class name="RoleBean" abstract="true" entity-name="org.beangle.security.blueprint.domain.Role">
    <id name="id" type="integer">
      <generator class="org.beangle.data.jpa.hibernate.TableSeqGenerator" />
    </id>
     <property name="name" />
    <property name="updatedAt" />
    <property name="enabled" />
    <property name="indexno" not-null="true"/>
    <many-to-one name="parent" class="org.beangle.security.blueprint.domain.Role"/>
    <bag name="children" inverse="true" cascade="all-delete-orphan"  collection-type="seq">
      <key column="parent_id"/>
      <one-to-many class="org.beangle.security.blueprint.domain.Role"/>
    </bag>
    <bag name="members" inverse="true" cascade="all-delete-orphan"  collection-type="seq">
      <key column="role_id" not-null="true"/>
      <one-to-many class="org.beangle.security.blueprint.domain.Member"/>
    </bag>
    <!--<map name="properties" cascade="all">
      <map-key-many-to-many column="field_id" class="Field"/>
      <element column="value" type="string" length="200"/>
    </map>
    -->
  </class>

  <class name="FieldBean" abstract="true" entity-name="org.beangle.security.blueprint.domain.Field">
    <id name="id" type="integer">
      <generator class="org.beangle.data.jpa.hibernate.TableSeqGenerator" />
    </id>
    <property name="title" not-null="true"/>
    <property name="source" not-null="true"/>
    <property name="multiple" not-null="true"/>
    <property name="required" not-null="true"/>
    <property name="typeName" not-null="true"/>
    <property name="keyName" />
    <property name="properties"/>
  </class>
</hibernate-mapping>